{
  "software": [
    {
      "name": "Certification Authority",
      "version": "1.0",
      "installationSteps": {
        "Ubuntu": [
          {
            "type": "skipCondition",
            "value": "test -e {{SERVER.SERVER_HOME}}/Server/Ca"
          },
          {
            "type": "packages",
            "value": "easy-rsa"
          },
          {
            "type": "command",
            "value": "mkdir -p {{SERVER.SERVER_HOME}}/Server/Ca"
          },
          {
            "type": "command",
            "value": "chmod 700 {{SERVER.SERVER_HOME}}/Server/Ca"
          },
          {
            "type": "command",
            "value": "ln -s /usr/share/easy-rsa/* {{SERVER.SERVER_HOME}}/Server/Ca"
          },
          {
            "type": "command",
            "value": "cd {{SERVER.SERVER_HOME}}/Server/Ca && ./pkitool --initca"
          },
          {
            "type": "deploy",
            "value": "Definitions/Software/Ca/Configuration:{{SERVER.SERVER_HOME}}/Server/Ca"
          },
          {
            "type": "command",
            "value": "cd {{SERVER.SERVER_HOME}}/Server/Ca && export EASYRSA_PASSIN='pass:{{SERVER.CERTIFICATION.PASSPHRASE}}' && export EASYRSA_PASSOUT='pass:{{SERVER.CERTIFICATION.PASSPHRASE}}' && echo 'Finish' | ./build-ca"
          }
        ]
      }
    }
  ]
}