{
  "variables": {
    "SERVER": {
      "DOVECOT": {
        "PORTS": {
          "POP": "3110",
          "IMAP": "3143",
          "POP3S": "3995",
          "IMAPS": "3993"
        }
      }
    }
  },
  "software": [
    {
      "name": "Mail server stack: Dovecot",
      "version": "1.0.0",
      "installationSteps": {
        "Docker": [
          {
            "type": "conditionCheck",
            "value": "{{SERVICE.MAIL_RECEIVE.NAME}}"
          },
          {
            "type": "command",
            "value": "systemctl status dovecot && systemctl stop dovecot && systemctl disable dovecot || true"
          },
          {
            "type": "portRequired",
            "value": "{{SERVER.DOVECOT.PORTS.IMAPS}}"
          },
          {
            "type": "portCheck",
            "value": "{{DB.PORT_EXPOSED}}"
          },
          {
            "type": "deploy",
            "value": "Definitions/Docker/Dovecot:{{DOCKER.DOCKER_HOME}}/Dovecot"
          },
          {
            "type": "tlsCertificate",
            "value": "{{SERVER.HOSTNAME}}"
          },
          {
            "type": "stack",
            "value": "{{DOCKER.DOCKER_HOME}}/Dovecot"
          },
          {
            "type": "check",
            "value": "{{SERVICE.MAIL_RECEIVE.NAME}}"
          },
          {
            "type": "portCheck",
            "value": "{{SERVER.DOVECOT.PORTS.IMAPS}}"
          }
        ]
      }
    }
  ]
}